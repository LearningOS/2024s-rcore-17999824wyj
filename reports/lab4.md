# rCore-2024S - Lab4 - report
@Author :    abcd1234
@Time   :    2024/5/31, 19:45
@Emaile :    abcd1234dbren@yeah.net
## 我实现的功能
1. 在系统级调用中完成了代码，为inode的一级接口预留内容。
2. 实现一级接口，将功能通过ROOT_INODE转交给文件系统。
3. 在文件系统中，分别进行了实现。
4. 对于unlinkat，我为DiskInode引入新变量，用于记录引用数，当引用数归0时，则释放，留下的空洞进行判断：若为最后的inode，则直接减小size，不然，则将其与最后的inode进行交换，再进行内存释放。
## 问答题
### 在我们的easy-fs中，root inode起着什么作用？如果root inode中的内容损坏了，会发生什么？
它是根目录，如果损坏了，那就找不到对应的子目录了。
### 举出使用 pipe 的一个实际应用的例子。
```bash
cat <FileName> | wc -l
```
### 如果需要在多个进程间互相通信，则需要为每一对进程建立一个管道，非常繁琐，请设计一个更易用的多进程通信机制。
让这些需要互相通信的进程共享同一个管道，在管道内维护一个进程的抽象：进程号。每一个共享的管道内，进程号唯一。通过指定进程号，可以保证共享的管道内的信息能够发给正确的进程。
## 荣誉准则
1. 在完成本次实验的过程（含此前学习的过程）中，我曾分别与 以下各位 就（与本次实验相关的）以下方面做过交流，还在代码中对应的位置以注释形式记录了具体的交流对象及内容：  
*万能的群友*

将ch6的easy-fs改成和ch8的easy-fs一样的代码，主要在于修改cache字段的定义。  
**注**：因为ch8内已有我需要的easy-fs的代码，故不在源代码中指出

1. 此外，我也参考了以下资料，还在代码中对应的位置以注释形式记录了具体的参考来源及内容：  
*无*

3. 我独立完成了本次实验除以上方面之外的所有工作，包括代码与文档。 我清楚地知道，从以上方面获得的信息在一定程度上降低了实验难度，可能会影响起评分。

4. 我从未使用过他人的代码，不管是原封不动地复制，还是经过了某些等价转换。 我未曾也不会向他人（含此后各届同学）复制或公开我的实验代码，我有义务妥善保管好它们。 我提交至本实验的评测系统的代码，均无意于破坏或妨碍任何计算机系统的正常运转。 我清楚地知道，以上情况均为本课程纪律所禁止，若违反，对应的实验成绩将按“-100”分计。

## 看法
真是离谱，为什么还要去修改已经写好的easy-fs啊？

在没有他人提醒的情况下，这该怎么去发现呢？我被IOError折磨了1周！建议在文档中指出，若遇到测试用例的IOError问题，可能是rustc版本过高，需要将rustc版本降低，或者将easy-fs里的block-cache的cache字段改为Vec！没有提示的情况下，遇到这个问题简直了，直接卡死！

我一周前就已经弄完了核心的功能代码，但在测试时，就报错为“IOError”，我就想，是不是我的程序把测试用例改掉了？不可能吧！那为什么会IOError呢？我详细的调试，发现报错：文件的长度小于文件描述符。这怎么可能？测试文件我都找到了，它怎么可能长度小？

在求助了万能的群友后，这个问题才解决了！
